<?php


/**
 * Skeleton subclass for performing query and update operations on the 'nfg_usuario' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Fri Jan  1 18:08:42 2010
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class NfgUsuarioPeer extends BaseNfgUsuarioPeer {

    public static function dameMiUsuario()
    {
        $id_usuario_sft = sfContext::getInstance()->getUser()->getAttribute('idUsuario',null,'SftUser');
        $criteria = new Criteria();
        $criteria->add(NfgUsuarioPeer::ID_SFUSER,$id_usuario_sft);
        $NfgUsuario = NfgUsuarioPeer::doSelectOne($criteria);

        return $NfgUsuario->getId();
    }

    public static function retrieveForAutoSelect($q)
    {
        $id_usuario_sft = sfContext::getInstance()->getUser()->getAttribute('idUsuario',null,'SftUser');
        $oCriteria = new Criteria();
        $oCriteria->add(SftUsuarioPeer::ALIAS, '%'.$q.'%', Criteria::LIKE);
        $oCriteria->add(SftUsuarioPeer::ID_SFUSER, $id_usuario_sft, Criteria::NOT_EQUAL);
        $oCriteria->addAscendingOrderByColumn(SftUsuarioPeer::ALIAS);
        $tSftUsuarios = SftUsuarioPeer::doSelect($oCriteria);

        $tUsuarios = array();
        foreach ($tSftUsuarios as $oUsuario)
        {
            $tUsuarios[$oUsuario->getId()] = $oUsuario->getAliasOriginal().' - '.$oUsuario->getAlias();
        }

        return $tUsuarios;
    }
} // NfgUsuarioPeer
